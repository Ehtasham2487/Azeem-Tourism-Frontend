import{j as e,R as g,I as K,D as j,M as G,E as re,x as le,r as s,A as oe,C as de,P as ce,w as J,t as ue,q as me}from"./index-HM1agdtz.js";import{d as he,c as xe,I as pe,S as ge,a as je,b as ve}from"./DeleteForeverOutlined-SFFpJk7X.js";import{d as fe}from"./CloudUploadOutlined-LVQmp2gh.js";import{G as n,S as Ce,T as c}from"./TextField-5eWDEJxN.js";import{S as be}from"./Select-Z0hCbYUa.js";import{R as Se}from"./ReviewVisa-v9KHPf97.js";import{C as ye}from"./CssBaseline-FkVtJlq8.js";import"./ListItemText-ig52TPkz.js";import"./capitalize--SaWl2Vs.js";function ke({title:B,setZip:Y,zip:a,country:o,setCountry:R,desc:v,address:F,setState:f,setCity:L,state:T,city:P,setDesc:C,setTitle:U,setAddress:m,setImageFileName:b,imageFileName:d,setImageFileUrl:S,imageFileUrl:u,totalCount:E,setTotalCount:y,price:V,setPrice:h,packageData:A,setRegion:W,region:q,isDiscounted:k,discount:_,setisDiscounted:I,setDiscount:M}){const N=()=>{I(!k)},$=t=>{W(t.target.value)},x=()=>{window.cloudinary.createUploadWidget({cloudName:"dhhjr3vim",uploadPreset:"nnitbvl3"},(i,l)=>{!i&&l&&l.event==="success"&&(b(w=>[...w,l.info.original_filename]),S(w=>[...w,l.info.url]))}).open()},z=(t,i)=>{b(d.filter(l=>l!==t)),S(u.filter(l=>l!==i))},p=()=>{A.images.map(t=>{b(i=>[...i,t.image]),S(i=>[...i,t.image])})};return e.jsx(g.Fragment,{children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(e.Fragment,{children:e.jsxs(n,{item:!0,xs:12,sm:12,children:[e.jsx(Ce,{direction:"row",alignItems:"center",spacing:2,children:e.jsxs("label",{htmlFor:"icon-button-file",children:[e.jsx(K,{onClick:()=>{x()},color:"primary","aria-label":"upload picture",component:"span",children:e.jsx(j,{style:{width:"350px",backgroundColor:"#27272a"},variant:"contained",sx:{p:1,backgroundColor:"#27272a"},endIcon:e.jsx(he,{}),children:"Upload Images"})}),d.map((t,i)=>d?e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("a",{className:"text-black",target:"_blank",href:u[i],rel:"noreferrer",children:e.jsxs("p",{children:["Uploaded Images: ",t]})}),e.jsx("div",{style:{marginTop:"-8px"},children:e.jsx(K,{className:"text-rose-600",onClick:()=>{z(t,u[i])},children:e.jsx(xe,{style:{color:"red"}})})})]}):null)]})}),d.length!==0?null:e.jsx("div",{style:{paddingLeft:"9px"},children:e.jsx(j,{onClick:p,variant:"contained",style:{marginTop:8,backgroundColor:"#27272a"},endIcon:e.jsx(fe,{}),children:"Use Old Images"})})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"title",name:"title",label:"Title",fullWidth:!0,autoComplete:"title",variant:"standard",value:B,onChange:t=>{U(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"description",name:"description",label:"Description",fullWidth:!0,autoComplete:"description",variant:"standard",value:v,onChange:t=>{C(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"address",name:"address",label:"First Name",fullWidth:!0,autoComplete:"shipping address-line1",variant:"standard",value:F,onChange:t=>{m(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"city",name:"city",label:"Last Name",fullWidth:!0,autoComplete:"shipping address-level2",variant:"standard",value:P,onChange:t=>{L(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,id:"state",multiline:!0,name:"state",label:"email",fullWidth:!0,variant:"standard",value:T,onChange:t=>{f(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"country",name:"country",label:"Phone Number",fullWidth:!0,autoComplete:"shipping country",variant:"standard",value:o,onChange:t=>{R(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"price",name:"price",label:"Price",fullWidth:!0,autoComplete:"price",variant:"standard",value:V,onChange:t=>{h(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:k,onChange:N,style:{marginRight:"3%"}}),"Is Discounted"]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"discount ",name:"discount ",label:"Discount Percentage",fullWidth:!0,variant:"standard",value:_,onChange:t=>{M(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"totalTickets ",name:"totalTickets ",label:"Duration (In Days)",fullWidth:!0,autoComplete:"totaltickets",variant:"standard",value:E,onChange:t=>{y(t.target.value)}})}),e.jsxs(n,{item:!0,xs:12,sm:6,children:[e.jsx(pe,{id:"region-select-label",children:"Region"}),e.jsxs(be,{value:q,onChange:$,displayEmpty:!0,fullWidth:!0,sx:{height:30},children:[e.jsx(G,{sx:{height:30},value:"Both",children:e.jsx("em",{children:"None"})}),e.jsx(G,{sx:{height:30},value:"Pakistan",children:"Pakistan"}),e.jsx(G,{sx:{height:30},value:"UAE",children:"UAE"})]})]})]})})}const O=["Visa Details","Review Your Visa"];function Le(){const B=re(),Y=le(),a=B.state,[o,R]=g.useState(0),[v,F]=s.useState([]),[f,L]=s.useState([]),[T,P]=s.useState([]),[C,U]=s.useState([]),[m,b]=s.useState(a.title),[d,S]=s.useState(a.description),[u,E]=s.useState(a.firstName),[y,V]=s.useState(a.lastName),[h,A]=s.useState(a.email),[W,q]=s.useState(""),[k,_]=s.useState(a.isDiscounted),[I,M]=s.useState(a.Discount),[N,$]=s.useState(a.phoneNumber),[x,z]=s.useState(a.duration),[p,t]=s.useState(a.price),[i,l]=s.useState(a.region),[w,Z]=g.useState(""),[Q,X]=s.useState([]),[ee,te]=s.useState([]),H=()=>{v.length==0||m.length==0||d.length==0||h.length==0||x.length==0||p.length==0?Z("Kindly Fill All The Fields !!! "):(f.map(r=>{X(D=>[...D,{image:r}])}),C.map(r=>{te(D=>[...D,{video:r}])}),Z(""),R(o+1))},se=()=>{const r={title:m,description:d,firstName:u,lastName:y,email:h,phoneNumber:N,images:Q,videos:ee,duration:x,region:i,isDiscounted:k,Discount:I,price:p,active:!0},D=`https://backend.azeemtourism.com/api/visas/update/${a._id}`;me.post(D,r).then(ne=>{}).catch(ne=>{})},ae=()=>{R(o-1)};function ie(r){switch(r){case 0:return e.jsx(ke,{title:m,setZip:q,zip:W,country:N,setCountry:$,desc:d,address:u,setState:A,setCity:V,state:h,city:y,setDesc:S,setTitle:b,setAddress:E,setVideoFileUrl:U,videoFileUrl:C,setImageFileName:F,imageFileName:v,setImageFileUrl:L,imageFileUrl:f,setVideoFileName:P,videoFileName:T,totalCount:x,setTotalCount:z,price:p,setPrice:t,packageData:a,setRegion:l,region:i,isDiscounted:k,discount:I,setisDiscounted:_,setDiscount:M});case 1:return e.jsx(Se,{title:m,zip:W,country:N,desc:d,address:u,state:h,city:y,videoFileUrl:C,imageFileName:v,imageFileUrl:f,videoFileName:T,price:p,totalCount:x,region:i,discount:I});default:throw new Error("Unknown step")}}return e.jsxs(g.Fragment,{children:[e.jsx(ye,{}),e.jsx(oe,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:r=>`1px solid ${r.palette.divider}`}}),e.jsx(de,{component:"main",maxWidth:"lg",sx:{mb:4},children:e.jsxs(ce,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[e.jsx(ge,{activeStep:o,sx:{pt:3,pb:5},children:O.map(r=>e.jsx(je,{children:e.jsx(ve,{children:r})},r))}),o===O.length?e.jsxs(g.Fragment,{children:[e.jsx(J,{variant:"h5",gutterBottom:!0,children:"Your Visa Has Been Updated"}),e.jsx(j,{variant:"contained",onClick:()=>Y("/admin/manageVisas"),sx:{mt:3,ml:1},children:"GoTo Manage Visa"})]}):e.jsxs(g.Fragment,{children:[ie(o),e.jsxs(ue,{sx:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(J,{style:{color:"red"},variant:"subtitle1",children:w}),o!==0&&e.jsx(j,{onClick:ae,sx:{mt:3,ml:1},children:"Back"}),o===O.length-1?e.jsxs(j,{variant:"contained",onClick:()=>{se(),H()},sx:{mt:3,ml:1},children:[" ","Edit Visa"]}):e.jsxs(j,{variant:"contained",onClick:H,sx:{mt:3,ml:1},children:[" ","Next"]})]})]})]})})]})}export{Le as default};
