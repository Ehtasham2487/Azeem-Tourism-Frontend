import{j as e,R as m,I as K,D as h,M as _,E as ie,x as re,r as s,A as le,C as oe,P as ce,w as J,t as de,q as ue}from"./index-HM1agdtz.js";import{d as me,c as he,I as xe,S as pe,a as ge,b as je}from"./DeleteForeverOutlined-SFFpJk7X.js";import{d as ve}from"./CloudUploadOutlined-LVQmp2gh.js";import{G as o,S as Ce,T as S}from"./TextField-5eWDEJxN.js";import{S as fe}from"./Select-Z0hCbYUa.js";import{H as Se}from"./ReviewHotels-iwLN-Jgy.js";import{C as ye}from"./CssBaseline-FkVtJlq8.js";import"./ListItemText-ig52TPkz.js";import"./capitalize--SaWl2Vs.js";function be({title:w,setZip:M,zip:i,country:c,setCountry:D,desc:x,address:B,setState:y,setCity:$,state:z,city:G,setDesc:b,setTitle:P,setAddress:u,setImageFileName:p,imageFileName:l,setImageFileUrl:g,imageFileUrl:d,totalCount:V,setTotalCount:O,price:R,setPrice:j,packageData:T,setRegion:U,region:E,isDiscounted:k,discount:F,setisDiscounted:I,setDiscount:L}){const v=t=>{U(t.target.value)},N=()=>{I(!k)},W=()=>{window.cloudinary.createUploadWidget({cloudName:"dhhjr3vim",uploadPreset:"nnitbvl3"},(n,r)=>{!n&&r&&r.event==="success"&&(p(C=>[...C,r.info.original_filename]),g(C=>[...C,r.info.url]))}).open()},A=(t,n)=>{p(l.filter(r=>r!==t)),g(d.filter(r=>r!==n))},H=()=>{T.images.map(t=>{p(n=>[...n,t.image]),g(n=>[...n,t.image])})};return e.jsx(m.Fragment,{children:e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(e.Fragment,{children:e.jsxs(o,{item:!0,xs:12,sm:12,children:[e.jsx(Ce,{direction:"row",alignItems:"center",spacing:2,children:e.jsxs("label",{htmlFor:"icon-button-file",children:[e.jsx(K,{onClick:()=>{W()},color:"primary","aria-label":"upload picture",component:"span",children:e.jsx(h,{style:{width:"350px",backgroundColor:"#27272a"},variant:"contained",sx:{p:1,backgroundColor:"#27272a"},endIcon:e.jsx(me,{}),children:"Upload Images"})}),l.map((t,n)=>l?e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("a",{className:"text-black",target:"_blank",href:d[n],rel:"noreferrer",children:e.jsxs("p",{children:["Uploaded Images: ",t]})}),e.jsx("div",{style:{marginTop:"-8px"},children:e.jsx(K,{className:"text-rose-600",onClick:()=>{A(t,d[n])},children:e.jsx(he,{style:{color:"red"}})})})]}):null)]})}),l.length!==0?null:e.jsx("div",{style:{paddingLeft:"9px"},children:e.jsx(h,{onClick:H,variant:"contained",style:{marginTop:8,backgroundColor:"#27272a"},endIcon:e.jsx(ve,{}),children:"Use Old Images"})})]})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(S,{required:!0,multiline:!0,id:"title",name:"title",label:"Name",fullWidth:!0,autoComplete:"title",variant:"standard",value:w,onChange:t=>{P(t.target.value)}})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(S,{required:!0,multiline:!0,id:"description",name:"description",label:"Description",fullWidth:!0,autoComplete:"description",variant:"standard",value:x,onChange:t=>{b(t.target.value)}})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(S,{required:!0,multiline:!0,id:"address",name:"address",label:"location",fullWidth:!0,autoComplete:"shipping address-line1",variant:"standard",value:B,onChange:t=>{u(t.target.value)}})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(S,{required:!0,multiline:!0,id:"price",name:"price",label:"Price",fullWidth:!0,autoComplete:"price",variant:"standard",value:R,onChange:t=>{j(t.target.value)}})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:k,onChange:N,style:{marginRight:"3%"}}),"Is Discounted"]})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(S,{multiline:!0,id:"discount ",name:"discount ",label:"Discount Percentage",fullWidth:!0,variant:"standard",value:F,onChange:t=>{L(t.target.value)}})}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsx(xe,{id:"region-select-label",children:"Region"}),e.jsxs(fe,{value:E,onChange:v,displayEmpty:!0,fullWidth:!0,sx:{height:30},children:[e.jsx(_,{sx:{height:30},value:"Both",children:e.jsx("em",{children:"None"})}),e.jsx(_,{sx:{height:30},value:"Pakistan",children:"Pakistan"}),e.jsx(_,{sx:{height:30},value:"UAE",children:"UAE"})]})]})]})})}const q=["Hotel Details","Review Your Package"];function Fe(){const w=ie(),M=re(),i=w.state,[c,D]=m.useState(0),[x,B]=s.useState([]),[y,$]=s.useState([]),[z,G]=s.useState([]),[b,P]=s.useState([]),[u,p]=s.useState(i.name),[l,g]=s.useState(i.description),[d,V]=s.useState(i.location),[O,R]=s.useState(null),[j,T]=s.useState(i.region),[U,E]=s.useState(null),[k,F]=s.useState(null),[I,L]=s.useState(i.isDiscounted),[v,N]=s.useState(i.Discount),[W,A]=s.useState(null),[H,t]=s.useState(null),[n,r]=s.useState(i.price),[C,Y]=m.useState(""),[Q,X]=s.useState([]),[ke,ee]=s.useState([]),Z=()=>{x.length==0||u.length==0||l.length==0||d.length==0||n.length==0?Y("Kindly Fill All The Fields !!! "):(y.map(a=>{X(f=>[...f,{image:a}])}),b.map(a=>{ee(f=>[...f,{video:a}])}),Y(""),D(c+1))},te=()=>{const a={name:u,description:l,location:d,images:Q,region:j,price:n,isDiscounted:I,Discount:v,active:!0},f=`https://backend.azeemtourism.com/api/hotels/update/${i._id}`;ue.post(f,a).then(ae=>{}).catch(ae=>{})},se=()=>{D(c-1)};function ne(a){switch(a){case 0:return e.jsx(be,{title:u,setZip:F,zip:k,country:W,setCountry:A,desc:l,address:d,setState:E,setCity:R,state:U,city:O,setDesc:g,setTitle:p,setAddress:V,setVideoFileUrl:P,videoFileUrl:b,setVideoFileName:G,videoFileName:z,setImageFileName:B,imageFileName:x,setImageFileUrl:$,imageFileUrl:y,totalCount:H,setTotalCount:t,price:n,setPrice:r,packageData:i,setRegion:T,region:j,isDiscounted:I,discount:v,setisDiscounted:L,setDiscount:N});case 1:return e.jsx(Se,{title:u,desc:l,address:d,imageFileName:x,imageFileUrl:y,price:n,region:j,discount:v});default:throw new Error("Unknown step")}}return e.jsxs(m.Fragment,{children:[e.jsx(ye,{}),e.jsx(le,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:a=>`1px solid ${a.palette.divider}`}}),e.jsx(oe,{component:"main",maxWidth:"lg",sx:{mb:4},children:e.jsxs(ce,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[e.jsx(pe,{activeStep:c,sx:{pt:3,pb:5},children:q.map(a=>e.jsx(ge,{children:e.jsx(je,{children:a})},a))}),c===q.length?e.jsxs(m.Fragment,{children:[e.jsx(J,{variant:"h5",gutterBottom:!0,children:"Your Package Has Been Updated"}),e.jsx(h,{variant:"contained",onClick:()=>M("/admin/managehotels"),sx:{mt:3,ml:1},children:"GoTo Manage Hotels"})]}):e.jsxs(m.Fragment,{children:[ne(c),e.jsxs(de,{sx:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(J,{style:{color:"red"},variant:"subtitle1",children:C}),c!==0&&e.jsx(h,{onClick:se,sx:{mt:3,ml:1},children:"Back"}),c===q.length-1?e.jsxs(h,{variant:"contained",onClick:()=>{te(),Z()},sx:{mt:3,ml:1},children:[" ","Edit Hotels"]}):e.jsxs(h,{variant:"contained",onClick:Z,sx:{mt:3,ml:1},children:[" ","Next"]})]})]})]})})]})}export{Fe as default};
