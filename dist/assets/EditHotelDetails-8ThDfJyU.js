import{j as e,R as m,I as G,z as h,M as N,D as te,w as se,r as s,A as ae,C as ne,P as ie,v as V,t as re,q as le}from"./index-odFMYlZr.js";import{d as oe,c as ce,I as de,S as ue,a as me,b as he}from"./DeleteForeverOutlined-ur7hsYTx.js";import{d as pe}from"./CloudUploadOutlined-a6YApA3d.js";import{G as d,S as xe,T as y}from"./TextField-KqW6Ko5o.js";import{S as ge}from"./Select-tRT-Bd6P.js";import{H as je}from"./ReviewHotels-hBrWoCAW.js";import{C as ve}from"./CssBaseline-M8cyZCHq.js";import"./withStyles-UNuNTrS6.js";function fe({title:k,setZip:W,zip:l,country:o,setCountry:b,desc:p,address:w,setState:C,setCity:H,state:_,city:q,setDesc:S,setTitle:I,setAddress:u,setImageFileName:x,imageFileName:r,setImageFileUrl:g,imageFileUrl:c,totalCount:D,setTotalCount:z,price:B,setPrice:j,packageData:P,setRegion:R,region:T}){const U=t=>{R(t.target.value)},F=()=>{window.cloudinary.createUploadWidget({cloudName:"dhhjr3vim",uploadPreset:"nnitbvl3"},(n,a)=>{!n&&a&&a.event==="success"&&(x(v=>[...v,a.info.original_filename]),g(v=>[...v,a.info.url]))}).open()},L=(t,n)=>{x(r.filter(a=>a!==t)),g(c.filter(a=>a!==n))},E=()=>{P.images.map(t=>{x(n=>[...n,t.image]),g(n=>[...n,t.image])})};return e.jsx(m.Fragment,{children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(e.Fragment,{children:e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsx(xe,{direction:"row",alignItems:"center",spacing:2,children:e.jsxs("label",{htmlFor:"icon-button-file",children:[e.jsx(G,{onClick:()=>{F()},color:"primary","aria-label":"upload picture",component:"span",children:e.jsx(h,{style:{width:"350px",backgroundColor:"#27272a"},variant:"contained",sx:{p:1,backgroundColor:"#27272a"},endIcon:e.jsx(oe,{}),children:"Upload Images"})}),r.map((t,n)=>r?e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("a",{className:"text-black",target:"_blank",href:c[n],rel:"noreferrer",children:e.jsxs("p",{children:["Uploaded Images: ",t]})}),e.jsx("div",{style:{marginTop:"-8px"},children:e.jsx(G,{className:"text-rose-600",onClick:()=>{L(t,c[n])},children:e.jsx(ce,{style:{color:"red"}})})})]}):null)]})}),r.length!==0?null:e.jsx("div",{style:{paddingLeft:"9px"},children:e.jsx(h,{onClick:E,variant:"contained",style:{marginTop:8,backgroundColor:"#27272a"},endIcon:e.jsx(pe,{}),children:"Use Old Images"})})]})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(y,{required:!0,multiline:!0,id:"title",name:"title",label:"Name",fullWidth:!0,autoComplete:"title",variant:"standard",value:k,onChange:t=>{I(t.target.value)}})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(y,{required:!0,multiline:!0,id:"description",name:"description",label:"Description",fullWidth:!0,autoComplete:"description",variant:"standard",value:p,onChange:t=>{S(t.target.value)}})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(y,{required:!0,multiline:!0,id:"address",name:"address",label:"location",fullWidth:!0,autoComplete:"shipping address-line1",variant:"standard",value:w,onChange:t=>{u(t.target.value)}})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(y,{required:!0,multiline:!0,id:"price",name:"price",label:"Price",fullWidth:!0,autoComplete:"price",variant:"standard",value:B,onChange:t=>{j(t.target.value)}})}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsx(de,{id:"region-select-label",children:"Region"}),e.jsxs(ge,{value:T,onChange:U,displayEmpty:!0,fullWidth:!0,sx:{height:30},children:[e.jsx(N,{sx:{height:30},value:"Both",children:e.jsx("em",{children:"None"})}),e.jsx(N,{sx:{height:30},value:"Pakistan",children:"Pakistan"}),e.jsx(N,{sx:{height:30},value:"UAE",children:"UAE"})]})]})]})})}const A=["Hotel Details","Review Your Package"];function Re(){const k=te(),W=se(),l=k.state,[o,b]=m.useState(0),[p,w]=s.useState([]),[C,H]=s.useState([]),[_,q]=s.useState([]),[S,I]=s.useState([]),[u,x]=s.useState(l.name),[r,g]=s.useState(l.description),[c,D]=s.useState(l.location),[z,B]=s.useState(null),[j,P]=s.useState(l.region),[R,T]=s.useState(null),[U,F]=s.useState(null),[L,E]=s.useState(null),[t,n]=s.useState(null),[a,v]=s.useState(l.price),[O,M]=m.useState(""),[Y,Z]=s.useState([]),[Ce,K]=s.useState([]),$=()=>{p.length==0||u.length==0||r.length==0||c.length==0||a.length==0?M("Kindly Fill All The Fields !!! "):(C.map(i=>{Z(f=>[...f,{image:i}])}),S.map(i=>{K(f=>[...f,{video:i}])}),M(""),b(o+1))},J=()=>{const i={name:u,description:r,location:c,images:Y,region:j,price:a,active:!0},f=`https://backend.azeemtourism.com/api/hotels/update/${l._id}`;le.post(f,i).then(ee=>{}).catch(ee=>{})},Q=()=>{b(o-1)};function X(i){switch(i){case 0:return e.jsx(fe,{title:u,setZip:F,zip:U,country:L,setCountry:E,desc:r,address:c,setState:T,setCity:B,state:R,city:z,setDesc:g,setTitle:x,setAddress:D,setVideoFileUrl:I,videoFileUrl:S,setVideoFileName:q,videoFileName:_,setImageFileName:w,imageFileName:p,setImageFileUrl:H,imageFileUrl:C,totalCount:t,setTotalCount:n,price:a,setPrice:v,packageData:l,setRegion:P,region:j});case 1:return e.jsx(je,{title:u,desc:r,address:c,imageFileName:p,imageFileUrl:C,price:a,region:j});default:throw new Error("Unknown step")}}return e.jsxs(m.Fragment,{children:[e.jsx(ve,{}),e.jsx(ae,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:i=>`1px solid ${i.palette.divider}`}}),e.jsx(ne,{component:"main",maxWidth:"lg",sx:{mb:4},children:e.jsxs(ie,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[e.jsx(ue,{activeStep:o,sx:{pt:3,pb:5},children:A.map(i=>e.jsx(me,{children:e.jsx(he,{children:i})},i))}),o===A.length?e.jsxs(m.Fragment,{children:[e.jsx(V,{variant:"h5",gutterBottom:!0,children:"Your Package Has Been Updated"}),e.jsx(h,{variant:"contained",onClick:()=>W("/admin/managehotels"),sx:{mt:3,ml:1},children:"GoTo Manage Hotels"})]}):e.jsxs(m.Fragment,{children:[X(o),e.jsxs(re,{sx:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(V,{style:{color:"red"},variant:"subtitle1",children:O}),o!==0&&e.jsx(h,{onClick:Q,sx:{mt:3,ml:1},children:"Back"}),o===A.length-1?e.jsxs(h,{variant:"contained",onClick:()=>{J(),$()},sx:{mt:3,ml:1},children:[" ","Edit Hotels"]}):e.jsxs(h,{variant:"contained",onClick:$,sx:{mt:3,ml:1},children:[" ","Next"]})]})]})]})})]})}export{Re as default};
