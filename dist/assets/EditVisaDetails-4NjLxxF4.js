import{j as e,R as p,I as G,z as g,M as q,D as se,w as ae,r as s,A as ie,C as ne,P as re,v as O,t as le,q as oe}from"./index-odFMYlZr.js";import{d as de,c as ce,I as ue,S as me,a as he,b as xe}from"./DeleteForeverOutlined-ur7hsYTx.js";import{d as pe}from"./CloudUploadOutlined-a6YApA3d.js";import{G as l,S as ge,T as c}from"./TextField-KqW6Ko5o.js";import{S as je}from"./Select-tRT-Bd6P.js";import{R as ve}from"./ReviewVisa-RV6DJD-5.js";import{C as fe}from"./CssBaseline-M8cyZCHq.js";import"./withStyles-UNuNTrS6.js";function Ce({title:B,setZip:z,zip:a,country:o,setCountry:I,desc:j,address:R,setState:v,setCity:W,state:w,city:F,setDesc:f,setTitle:L,setAddress:m,setImageFileName:C,imageFileName:d,setImageFileUrl:b,imageFileUrl:u,totalCount:U,setTotalCount:S,price:P,setPrice:h,packageData:V,setRegion:T,region:E}){const y=t=>{T(t.target.value)},A=()=>{window.cloudinary.createUploadWidget({cloudName:"dhhjr3vim",uploadPreset:"nnitbvl3"},(i,n)=>{!i&&n&&n.event==="success"&&(C(k=>[...k,n.info.original_filename]),b(k=>[...k,n.info.url]))}).open()},x=(t,i)=>{C(d.filter(n=>n!==t)),b(u.filter(n=>n!==i))},D=()=>{V.images.map(t=>{C(i=>[...i,t.image]),b(i=>[...i,t.image])})};return e.jsx(p.Fragment,{children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(e.Fragment,{children:e.jsxs(l,{item:!0,xs:12,sm:12,children:[e.jsx(ge,{direction:"row",alignItems:"center",spacing:2,children:e.jsxs("label",{htmlFor:"icon-button-file",children:[e.jsx(G,{onClick:()=>{A()},color:"primary","aria-label":"upload picture",component:"span",children:e.jsx(g,{style:{width:"350px",backgroundColor:"#27272a"},variant:"contained",sx:{p:1,backgroundColor:"#27272a"},endIcon:e.jsx(de,{}),children:"Upload Images"})}),d.map((t,i)=>d?e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("a",{className:"text-black",target:"_blank",href:u[i],rel:"noreferrer",children:e.jsxs("p",{children:["Uploaded Images: ",t]})}),e.jsx("div",{style:{marginTop:"-8px"},children:e.jsx(G,{className:"text-rose-600",onClick:()=>{x(t,u[i])},children:e.jsx(ce,{style:{color:"red"}})})})]}):null)]})}),d.length!==0?null:e.jsx("div",{style:{paddingLeft:"9px"},children:e.jsx(g,{onClick:D,variant:"contained",style:{marginTop:8,backgroundColor:"#27272a"},endIcon:e.jsx(pe,{}),children:"Use Old Images"})})]})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"title",name:"title",label:"Title",fullWidth:!0,autoComplete:"title",variant:"standard",value:B,onChange:t=>{L(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"description",name:"description",label:"Description",fullWidth:!0,autoComplete:"description",variant:"standard",value:j,onChange:t=>{f(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"address",name:"address",label:"First Name",fullWidth:!0,autoComplete:"shipping address-line1",variant:"standard",value:R,onChange:t=>{m(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"city",name:"city",label:"Last Name",fullWidth:!0,autoComplete:"shipping address-level2",variant:"standard",value:F,onChange:t=>{W(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,id:"state",multiline:!0,name:"state",label:"email",fullWidth:!0,variant:"standard",value:w,onChange:t=>{v(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiline:!0,id:"country",name:"country",label:"Phone Number",fullWidth:!0,autoComplete:"shipping country",variant:"standard",value:o,onChange:t=>{I(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"price",name:"price",label:"Price",fullWidth:!0,autoComplete:"price",variant:"standard",value:P,onChange:t=>{h(t.target.value)}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(c,{required:!0,multiline:!0,id:"totalTickets ",name:"totalTickets ",label:"Duration (In Days)",fullWidth:!0,autoComplete:"totaltickets",variant:"standard",value:U,onChange:t=>{S(t.target.value)}})}),e.jsxs(l,{item:!0,xs:12,sm:6,children:[e.jsx(ue,{id:"region-select-label",children:"Region"}),e.jsxs(je,{value:E,onChange:y,displayEmpty:!0,fullWidth:!0,sx:{height:30},children:[e.jsx(q,{sx:{height:30},value:"Both",children:e.jsx("em",{children:"None"})}),e.jsx(q,{sx:{height:30},value:"Pakistan",children:"Pakistan"}),e.jsx(q,{sx:{height:30},value:"UAE",children:"UAE"})]})]})]})})}const _=["Visa Details","Review Your Visa"];function Be(){const B=se(),z=ae(),a=B.state,[o,I]=p.useState(0),[j,R]=s.useState([]),[v,W]=s.useState([]),[w,F]=s.useState([]),[f,L]=s.useState([]),[m,C]=s.useState(a.title),[d,b]=s.useState(a.description),[u,U]=s.useState(a.firstName),[S,P]=s.useState(a.lastName),[h,V]=s.useState(a.email),[T,E]=s.useState(""),[y,A]=s.useState(a.phoneNumber),[x,D]=s.useState(a.duration),[t,i]=s.useState(a.price),[n,k]=s.useState(a.region),[Y,M]=p.useState(""),[Z,H]=s.useState([]),[K,J]=s.useState([]),$=()=>{j.length==0||m.length==0||d.length==0||h.length==0||x.length==0||t.length==0?M("Kindly Fill All The Fields !!! "):(v.map(r=>{H(N=>[...N,{image:r}])}),f.map(r=>{J(N=>[...N,{video:r}])}),M(""),I(o+1))},Q=()=>{const r={title:m,description:d,firstName:u,lastName:S,email:h,phoneNumber:y,images:Z,videos:K,duration:x,region:n,price:t,active:!0},N=`https://backend.azeemtourism.com/api/visas/update/${a._id}`;oe.post(N,r).then(te=>{}).catch(te=>{})},X=()=>{I(o-1)};function ee(r){switch(r){case 0:return e.jsx(Ce,{title:m,setZip:E,zip:T,country:y,setCountry:A,desc:d,address:u,setState:V,setCity:P,state:h,city:S,setDesc:b,setTitle:C,setAddress:U,setVideoFileUrl:L,videoFileUrl:f,setImageFileName:R,imageFileName:j,setImageFileUrl:W,imageFileUrl:v,setVideoFileName:F,videoFileName:w,totalCount:x,setTotalCount:D,price:t,setPrice:i,packageData:a,setRegion:k,region:n});case 1:return e.jsx(ve,{title:m,zip:T,country:y,desc:d,address:u,state:h,city:S,videoFileUrl:f,imageFileName:j,imageFileUrl:v,videoFileName:w,price:t,totalCount:x,region:n});default:throw new Error("Unknown step")}}return e.jsxs(p.Fragment,{children:[e.jsx(fe,{}),e.jsx(ie,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:r=>`1px solid ${r.palette.divider}`}}),e.jsx(ne,{component:"main",maxWidth:"lg",sx:{mb:4},children:e.jsxs(re,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[e.jsx(me,{activeStep:o,sx:{pt:3,pb:5},children:_.map(r=>e.jsx(he,{children:e.jsx(xe,{children:r})},r))}),o===_.length?e.jsxs(p.Fragment,{children:[e.jsx(O,{variant:"h5",gutterBottom:!0,children:"Your Visa Has Been Updated"}),e.jsx(g,{variant:"contained",onClick:()=>z("/admin/manageVisas"),sx:{mt:3,ml:1},children:"GoTo Manage Visa"})]}):e.jsxs(p.Fragment,{children:[ee(o),e.jsxs(le,{sx:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(O,{style:{color:"red"},variant:"subtitle1",children:Y}),o!==0&&e.jsx(g,{onClick:X,sx:{mt:3,ml:1},children:"Back"}),o===_.length-1?e.jsxs(g,{variant:"contained",onClick:()=>{Q(),$()},sx:{mt:3,ml:1},children:[" ","Edit Visa"]}):e.jsxs(g,{variant:"contained",onClick:$,sx:{mt:3,ml:1},children:[" ","Next"]})]})]})]})})]})}export{Be as default};
