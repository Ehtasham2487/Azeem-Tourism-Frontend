import{r as i,_ as W,w as U,ag as L,q as F,j as e}from"./index-KmvzQcx_.js";import{B as M}from"./Tooltip-3Fkf72Yj.js";import{C as V}from"./Card-_aKLilDf.js";import{F as J}from"./index-4HwridyP.js";import{c as K,a as N,b as G,d as H,e as Z,I as Q,F as X,f as Y,u as ee}from"./index.esm-2v95GXJo.js";import{w as te,_ as ae,c as se,b as z}from"./capitalize-0cn3uosV.js";import"./index-J8XLWfh9.js";var re=function(t){return{root:{margin:0},body2:t.typography.body2,body1:t.typography.body1,caption:t.typography.caption,button:t.typography.button,h1:t.typography.h1,h2:t.typography.h2,h3:t.typography.h3,h4:t.typography.h4,h5:t.typography.h5,h6:t.typography.h6,subtitle1:t.typography.subtitle1,subtitle2:t.typography.subtitle2,overline:t.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorTextPrimary:{color:t.palette.text.primary},colorTextSecondary:{color:t.palette.text.secondary},colorError:{color:t.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}},I={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},ie=i.forwardRef(function(t,D){var a=t.align,g=a===void 0?"inherit":a,c=t.classes,R=t.className,d=t.color,y=d===void 0?"initial":d,_=t.component,f=t.display,u=f===void 0?"initial":f,k=t.gutterBottom,b=k===void 0?!1:k,C=t.noWrap,$=C===void 0?!1:C,P=t.paragraph,p=P===void 0?!1:P,j=t.variant,h=j===void 0?"body1":j,S=t.variantMapping,T=S===void 0?I:S,q=ae(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),B=_||(p?"p":T[h]||I[h])||"span";return i.createElement(B,W({className:se(c.root,R,h!=="inherit"&&c[h],y!=="initial"&&c["color".concat(z(y))],$&&c.noWrap,b&&c.gutterBottom,p&&c.paragraph,g!=="inherit"&&c["align".concat(z(g))],u!=="initial"&&c["display".concat(z(u))]),ref:D},q))});const oe=te(re,{name:"MuiTypography"})(ie),he=()=>{U();const{slug:x}=L(),[t,D]=i.useState([]),[a,g]=i.useState();i.useState(!1);const[c,R]=i.useState([]),[d,y]=i.useState(),[_,f]=i.useState(),[u,k]=i.useState(),[b,C]=i.useState(),[$,P]=i.useState(),[p,j]=i.useState(null);i.useEffect(()=>{const s="https://backend.azeemtourism.com/api/tours/get";F.get(s).then(l=>{const o=l.data.filter(n=>n.active===!0);D(o),g(o.find(n=>n._id===x)),o.find(n=>n._id===x)}).catch(l=>{console.log(l.message)});const r=localStorage.getItem("country");F.get("http://api.exchangeratesapi.io/v1/latest?access_key=69d8500368c69cc515c8785040780d20").then(l=>{const o="USD",n=r=="Pakistan"?"PKR":"AED";R([o,...Object.keys(l.data.rates)]),y(o),f(n),C(l.data.rates[o]),k(l.data.rates[n])})},[x]),i.useEffect(()=>{window.scrollTo(0,0)},[]),i.useEffect(()=>{if(a){const s=a.isDiscounted&&a.Discount?a.price-a.price*a.Discount/100:a.price,r=d==="USD"?`$${s.toFixed(2)}`:d==="PKR"?`Rs ${Math.round(u/b*s)}`:`AED ${Math.round(u/b*s)}`;P(r)}},[a,d,u,b]),i.useEffect(()=>{a&&a.milestone&&a.milestone.length>0&&j(a.milestone[0])},[a]);const h=()=>{y(_),f(d)},S=s=>{j(s)},T=K({full_name:N().matches(/^[a-zA-Z0-9_ ]*$/,"Username can only contain letters, numbers, underscores, and spaces").required("Required"),total_persons:G().min(1,"Total persons cannot be less than 1").required("Required"),date_of_tour:H().required("Required"),pickup_time:N().required("Required"),user_email:N().email("Invalid email address").required("Required"),user_phone:N().required("Required"),pickup_location:N().required("Required")}),q={full_name:"",total_persons:1,date_of_tour:"",pickup_time:"",user_email:"",user_phone:"",pickup_location:""},B=async s=>{const{full_name:r,total_persons:l,date_of_tour:o,pickup_time:n,user_email:E,user_phone:O,pickup_location:A}=s;let v=a.price*l;a.isDiscounted&&a.Discount&&(v=v-v*a.Discount/100),F.post("https://backend.azeemtourism.com/api/payments/intent",{packageCharges:v}).then(w=>{localStorage.setItem("orderDetails",JSON.stringify({fullname:r,email:E,phone:O,pickuplocation:A,totalpersons:l,dateoftour:o,pickuptime:n,totalprice:v,packageObject:a,stripeSessionId:w.data.sessionID,orderType:"tour"})),w.data&&(window.location.href=w.data.sessionURL)}).catch(w=>console.log(w.message))},m=({label:s,...r})=>{const[l,o]=ee(r);return e.jsxs("div",{className:"mb-4 flex-col",children:[e.jsx("label",{className:"block text-zinc-800 text-sm font-semibold mb-2 font-inter",children:s}),e.jsx("input",{...l,...r,className:`appearance-none border ${o.touched&&o.error?"border-red-500":"border-gray-300"} rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline`}),o.touched&&o.error?e.jsxs("p",{className:"text-red-500 text-sm font-semibold ",children:["*",o.error]}):null]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-center px-5 lg:px-0 py-5",children:a&&e.jsx("div",{className:"w-full lg:justify-left",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-x-10 justify-center ",children:[e.jsxs("div",{className:"w-full justify-center ",children:[e.jsx("h2",{className:"p-2 text-2xl  lg:text-2xl text-center font-bold font-inter text-zinc-800 text-left  mb-2",children:a.title}),e.jsx(Z.Carousel,{data:a.images,time:3e3,radius:"8px",slideBackgroundColor:"white",width:"100%",height:"60vh",captionPosition:"bottom",automatic:!0,dots:!0,pauseIconColor:"white",slideImageFit:"cover"}),e.jsxs("div",{className:"pt-5",children:[e.jsx("h5",{className:"font-inter font-semibold text-md text-left",children:"How the tour will look like?"}),e.jsx("p",{className:"font-inter",children:a.description})]}),e.jsxs("div",{className:"flex ",style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"3%",marginBottom:"4%"},children:[e.jsxs("p",{className:"flex text-xl font-inter font-semibold mt-3 gap-x-2 mr-1",children:[e.jsx(Q,{className:"mt-1"}),"Price: ",$]}),e.jsxs(M,{className:"ml-5 shadow-sm bg-black text-white hover:bg-white hover:text-black transition-colors duration-100 text-xs md:text-sm font-medium text-center rounded-lg ",onClick:()=>h(),children:["Change Price to ",_]})]}),a&&e.jsx(e.Fragment,{children:e.jsx("div",{children:a.milestone&&e.jsxs(e.Fragment,{children:[a.milestone.length>0&&e.jsx("h2",{style:{fontWeight:"bold"},children:"Milestones in this tour are:"}),p&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("h3",{style:{textAlign:"center",marginBottom:4},children:["Milestone: ",p.title]}),e.jsx("img",{src:p.image,alt:p.title,style:{width:"30%",height:"auto"}})]}),e.jsx("div",{className:"thumbnails",style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:a.milestone.map((s,r)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx("img",{src:s.image,alt:s.title,onClick:()=>S(s),style:{width:"50px",height:"50px",cursor:"pointer",marginRight:3}},r),e.jsxs(oe,{children:[r+1," "]})]}))})]})})})]}),e.jsxs("div",{className:"w-full lg:w-2/5 ",children:[e.jsx("h5",{className:"font-bold text-center font-inter text-xl lg:text-2xl mb-2",children:"Recent Tours"}),e.jsx("div",{className:"overflow-y-auto h-screen px-2 shadow-lg",children:t.map((s,r)=>e.jsx(V,{imgSrc:s.images[0].image,className:"mb-5 shadow-lg border-2 border-blue-200",style:{borderRadius:10},children:e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-semibold text-center text-xl",children:t[r].title}),e.jsx(M,{onClick:()=>{g(t[r])},className:"mt-3 shadow-sm border-2 border-black bg-zinc-100 text-zinc-800 hover:bg-zinc-800 hover:text-white transition-colors duration-100 text-sm font-medium text-center rounded-lg bg-primary-700 w-full",style:{borderWidth:2,borderColor:"black"},children:"View"})]})},s.id))})]})]})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 lg:pb-5",children:[e.jsx("div",{className:"title",children:e.jsx("h2",{className:"py-5 text-2xl lg:py-10 lg:text-3xl font-bold font-inter text-zinc-800 text-center",children:"Get your slots booked!"})}),e.jsx("div",{className:" flex flex-col justify-center gap-y-10 w-full md:w-2/5",children:e.jsx(X,{initialValues:q,validationSchema:T,validateOnBlur:!0,validateOnChange:!1,onSubmit:(s,{resetForm:r})=>{B(s),r()},children:e.jsxs(Y,{className:"border-2 bg-blue-200 shadow-lg rounded-lg px-4 md:px-8 pt-6 pb-8 mb-4",style:{borderRadius:20},children:[e.jsx(m,{label:"Full Name",name:"full_name",type:"text",className:"mb-4"}),e.jsx(m,{label:"Number Of Persons",name:"total_persons",type:"number",className:"mb-4"}),e.jsx(m,{label:"Date of Tour",name:"date_of_tour",type:"datetime-local",className:"mb-4"}),e.jsx(m,{label:"Pickup Time",name:"pickup_time",type:"time",className:"mb-4"}),e.jsx(m,{label:"Email",name:"user_email",type:"email",className:"mb-4"}),e.jsx(m,{label:"Phone",name:"user_phone",type:"tel",className:"mb-4"}),e.jsx(m,{label:"Pickup Location",name:"pickup_location",type:"text",className:"mb-4"}),e.jsx("div",{className:" flex justify-center mt-5",children:e.jsx(M,{type:"submit",className:"shadow-sm lg:w-48 border-2 border-black text-zinc-800 hover:bg-zinc-800 hover:text-white transition-colors duration-100 text-md font-medium text-center rounded-lg bg-primary-700 w-full",children:"Proceed"})})]})})})]}),e.jsx(J,{phoneNumber:"+971522760013",chatMessage:"",messageDelay:"1",accountName:"Azeem Tourism"})]})]})};export{he as default};
