import{w as O,aj as T,r as l,q as u,j as e}from"./index-J3bmnUGf.js";import{B as b}from"./Tooltip-PoBpJYkM.js";import{C as F}from"./Card-k256hTuz.js";import{F as I}from"./index-Vc4ZOw3q.js";import{c as E,a as c,b as $,d as U,e as A,I as B,F as L,f as M,u as V}from"./index.esm-lOZCirdp.js";import"./index-bt9d5Oet.js";const X=()=>{O();const{slug:x}=T(),[d,j]=l.useState([]),[o,p]=l.useState();l.useState(!1);const[W,y]=l.useState([]),[m,h]=l.useState(),[f,g]=l.useState(),[N,k]=l.useState(),[_,w]=l.useState();l.useEffect(()=>{const s="https://backend.azeemtourism.com/api/tours/get";u.get(s).then(t=>{const r=t.data.filter(a=>a.active===!0);j(r),p(r.find(a=>a._id===x)),r.find(a=>a._id===x)}).catch(t=>{console.log(t.message)}),u.get("http://api.exchangeratesapi.io/v1/latest?access_key=69d8500368c69cc515c8785040780d20").then(t=>{const r="USD",a="AED";y([r,...Object.keys(t.data.rates)]),h(r),g(a),w(t.data.rates[r]),k(t.data.rates[a])})},[]),l.useEffect(()=>{},[]);const v=()=>{h(f),g(m)},C=E({full_name:c().matches(/^[a-zA-Z0-9_ ]*$/,"Username can only contain letters, numbers, underscores, and spaces").required("Required"),total_persons:$().min(1,"Total persons cannot be less than 1").required("Required"),date_of_tour:U().required("Required"),pickup_time:c().required("Required"),user_email:c().email("Invalid email address").required("Required"),user_phone:c().required("Required"),pickup_location:c().required("Required")}),R={full_name:"",total_persons:1,date_of_tour:"",pickup_time:"",user_email:"",user_phone:"",pickup_location:""},S=async s=>{const{full_name:t,total_persons:r,date_of_tour:a,pickup_time:q,user_email:D,user_phone:P,pickup_location:z}=s;u.post("https://backend.azeemtourism.com/api/payments/intent",{packageCharges:o.price*r}).then(n=>{localStorage.setItem("orderDetails",JSON.stringify({fullname:t,email:D,phone:P,pickuplocation:z,totalpersons:r,dateoftour:a,pickuptime:q,totalprice:o.price*r,packageObject:o,stripeSessionId:n.data.sessionID,orderType:"tour"})),n.data&&(window.location.href=n.data.sessionURL)}).catch(n=>console.log(n.message))},i=({label:s,...t})=>{const[r,a]=V(t);return e.jsxs("div",{className:"mb-4 flex-col",children:[e.jsx("label",{className:"block text-zinc-800 text-sm font-semibold mb-2 font-inter",children:s}),e.jsx("input",{...r,...t,className:`appearance-none border ${a.touched&&a.error?"border-red-500":"border-gray-300"} rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline`}),a.touched&&a.error?e.jsxs("p",{className:"text-red-500 text-sm font-semibold ",children:["*",a.error]}):null]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-center px-5 lg:px-0 py-5",children:o&&e.jsx("div",{className:"w-full lg:justify-left",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-x-10 justify-center ",children:[e.jsxs("div",{className:"w-full justify-center ",children:[e.jsx("h2",{className:"p-2 text-2xl  lg:text-2xl text-center font-bold font-inter text-zinc-800 text-left",children:o.title}),e.jsx(A.Carousel,{data:o.images,time:3e3,radius:"8px",slideBackgroundColor:"white",width:"100%",height:"60vh",captionPosition:"bottom",automatic:!0,dots:!0,pauseIconColor:"white",slideImageFit:"cover"}),e.jsxs("div",{className:"pt-5",children:[e.jsx("h5",{className:"font-inter font-semibold text-md text-left",children:"How the tour will look like?"}),e.jsx("p",{className:"font-inter",children:o.description})]}),e.jsxs("div",{className:"flex ",style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"3%"},children:[e.jsxs("p",{className:"flex text-xl font-inter font-semibold mt-3 gap-x-2",children:[e.jsx(B,{className:"mt-1"}),"Price: ",m==="USD"?"$":"AED: "]}),e.jsx("span",{className:"font-inter font-bold text-xl mt-3",children:m==="USD"?o.price:Math.round(N/_*o.price,9)}),e.jsxs("button",{style:{marginTop:"0.8%",padding:"1.25%",backgroundColor:"black",color:"white",paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,marginLeft:10,border:1,borderRadius:8,transition:"background-color 0.3s, color 0.3s"},onClick:()=>v(),onMouseOver:s=>{s.target.style.backgroundColor="#7ec7b3",s.target.style.color="black"},onMouseOut:s=>{s.target.style.backgroundColor="black",s.target.style.color="white"},children:["Change Price to ",f]})]})]}),e.jsxs("div",{className:"w-full lg:w-2/5 ",children:[e.jsx("h5",{className:"font-bold text-center font-inter text-xl lg:text-2xl",children:"Recent Tours"}),e.jsx("div",{className:"overflow-y-auto h-screen px-2 shadow-lg",children:d.map((s,t)=>e.jsx(F,{imgSrc:s.images[0].image,className:"mb-5 shadow-lg border-2 border-blue-200",style:{borderRadius:10},children:e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-semibold text-center text-xl",children:d[t].title}),e.jsx(b,{onClick:()=>{p(d[t])},className:"mt-3 shadow-sm border-2 border-black bg-zinc-100 text-zinc-800 hover:bg-zinc-800 hover:text-white transition-colors duration-100 text-sm font-medium text-center rounded-lg bg-primary-700 w-full",style:{borderWidth:2,borderColor:"black"},children:"View"})]})},s.id))})]})]})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 lg:pb-5",children:[e.jsx("div",{className:"title",children:e.jsx("h2",{className:"py-5 text-2xl lg:py-10 lg:text-3xl font-bold font-inter text-zinc-800 text-center",children:"Get your slots booked!"})}),e.jsx("div",{className:" flex flex-col justify-center gap-y-10 w-full md:w-2/5",children:e.jsx(L,{initialValues:R,validationSchema:C,validateOnBlur:!0,validateOnChange:!1,onSubmit:(s,{resetForm:t})=>{S(s),t()},children:e.jsxs(M,{className:"border-2 bg-blue-200 shadow-lg rounded-lg px-4 md:px-8 pt-6 pb-8 mb-4",style:{borderRadius:20},children:[e.jsx(i,{label:"Full Name",name:"full_name",type:"text",className:"mb-4"}),e.jsx(i,{label:"Number Of Persons",name:"total_persons",type:"number",className:"mb-4"}),e.jsx(i,{label:"Date of Tour",name:"date_of_tour",type:"datetime-local",className:"mb-4"}),e.jsx(i,{label:"Pickup Time",name:"pickup_time",type:"time",className:"mb-4"}),e.jsx(i,{label:"Email",name:"user_email",type:"email",className:"mb-4"}),e.jsx(i,{label:"Phone",name:"user_phone",type:"tel",className:"mb-4"}),e.jsx(i,{label:"Pickup Location",name:"pickup_location",type:"text",className:"mb-4"}),e.jsx("div",{className:" flex justify-center mt-5",children:e.jsx(b,{type:"submit",className:"shadow-sm lg:w-48 border-2 border-black text-zinc-800 hover:bg-zinc-800 hover:text-white transition-colors duration-100 text-md font-medium text-center rounded-lg bg-primary-700 w-full",children:"Proceed"})})]})})})]}),e.jsx(I,{phoneNumber:"+971522760013",chatMessage:"",messageDelay:"1",accountName:"Azeem Tourism"})]})]})};export{X as default};
